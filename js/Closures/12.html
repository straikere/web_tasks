<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12</title>
</head>
<body>
    
</body>
</html>
<script>
// Задача 12
// Следующий код создает массив функций-стрелков shooters. По замыслу, каждый стрелок должен выводить свой номер:
// function makeArmy() {

//   var shooters = [];

//   for (var i = 0; i < 10; i++) {
//     var shooter = function() { // функция-стрелок
//       alert( i ); // выводит свой номер
//     };
//     shooters.push(shooter);
//   }

//   return shooters;
// }

// var army = makeArmy();

// army[0](); // стрелок выводит 10, а должен 0
// army[5](); // стрелок выводит 10...
// // .. все стрелки выводят 10 вместо 0,1,2...9
// Почему все стрелки́ выводят одно и то же? Поправьте код, чтобы стрелки работали как задумано. Предложите несколько вариантов исправления.


function makeArmy() {

  var shooters = [];

  for (var i = 0; i < 10; i++) {
    var shooter = (function (x) { 
      return () => alert( x )
    })(i)
    
    shooters.push(shooter);
  }

  return shooters;
}

var army = makeArmy();

army[0](); // стрелок выводит 10, а должен 0
army[5](); // стрелок выводит 10...
// .. все стрелки выводят 10 вместо 0,1,2...9

/*
Проблема в строчке for (var i = 0; i < 10; i++) shooter имеет дуступ к i после завершения цикла а в конце цикла она равно 10. 
Решение изменить var на let, тогда для sooter создаеться своё лексическое окружение
Ну или использовать замыкание 
*/


</script>